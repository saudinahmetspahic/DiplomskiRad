#pragma checksum "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "1ba34166be72dc023be866c20125df379b59479e"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Chat_OpenChatBox_Ajax), @"mvc.1.0.view", @"/Views/Chat/OpenChatBox_Ajax.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\_ViewImports.cshtml"
using WebApp;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\_ViewImports.cshtml"
using WebApp.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
using WebApp.ViewModels.Chat;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"1ba34166be72dc023be866c20125df379b59479e", @"/Views/Chat/OpenChatBox_Ajax.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"fc48f17eb9bac3476d8060730298bf398eb2fa5e", @"/Views/_ViewImports.cshtml")]
    public class Views_Chat_OpenChatBox_Ajax : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<ChatListingMessages_VM>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n<p class=\"header-text text-color-black\"><i class=\"fa fa-commenting\"></i> Message ");
#nullable restore
#line 4 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
                                                                            Write(Model.RecieverName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n<div class=\"flex-column padding-50 h-100 scroll-allow\" id=\"messagesDiv\">\r\n    <input hidden id=\"ChatId\"");
            BeginWriteAttribute("value", " value=\"", 273, "\"", 294, 1);
#nullable restore
#line 6 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
WriteAttributeValue("", 281, Model.ChatId, 281, 13, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" />\r\n    <input hidden id=\"SenderId\"");
            BeginWriteAttribute("value", " value=\"", 331, "\"", 354, 1);
#nullable restore
#line 7 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
WriteAttributeValue("", 339, Model.SenderId, 339, 15, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" />\r\n    <input hidden id=\"RecieverId\"");
            BeginWriteAttribute("value", " value=\"", 393, "\"", 418, 1);
#nullable restore
#line 8 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
WriteAttributeValue("", 401, Model.RecieverId, 401, 17, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" />\r\n\r\n");
#nullable restore
#line 10 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
     foreach (var i in Model.MessagesList)
    {

#line default
#line hidden
#nullable disable
            WriteLiteral("        <div class=\"d-block\">\r\n            <div");
            BeginWriteAttribute("class", " class=\"", 524, "\"", 797, 6);
#nullable restore
#line 13 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
WriteAttributeValue("", 532, i.SenderId != Model.RecieverId ? "background-light margin-right-25 div-align-left text-align-left border-radius-left" : "background-dark margin-left-25 div-align-right text-align-right border-radius-right", 532, 208, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue(" ", 740, "w-75", 741, 5, true);
            WriteAttributeValue(" ", 745, "d-inline-block", 746, 15, true);
            WriteAttributeValue(" ", 760, "margin-5", 761, 9, true);
            WriteAttributeValue(" ", 769, "padding-20", 770, 11, true);
            WriteAttributeValue(" ", 780, "text-color-white", 781, 17, true);
            EndWriteAttribute();
            WriteLiteral(">\r\n                <p class=\"small-text text-color-darkgray\">");
#nullable restore
#line 14 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
                                                     Write(i.SendingDate.ToString("dd/MM/yyyy hh:mm dddd"));

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n                <p> ");
#nullable restore
#line 15 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
               Write(i.MessageContent);

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n            </div>\r\n        </div>\r\n");
#nullable restore
#line 18 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
    }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"

</div>

<div class=""d-block"">
    <input id=""messageInput"" placeholder=""Write your message.."" class=""w-75 h-100 padding-5"" /> <button id=""sendMessageButton"" class=""btn btn-secondary float-right w-25 h-100"" onclick=""javasctipt: SendNewMessage();"">Send <i class=""fa fa-level-up""></i></button>
</div>


<script>


    function SendNewMessage() {
        connection.invoke(""AddUserToGroup"", $(""#ChatId"").val()).catch(function (err) {
            console.log(err.toString());
        });

        var messageContent = $(""#messageInput"").val();
        $.post(""/Chat/SendNewMessage?ChatId="" + $(""#ChatId"").val() + ""&Message="" + messageContent + ""&User2Id="" + $(""#RecieverId"").val());
        connection.invoke(""SendMessageToGroup"", $(""#ChatId"").val(), $(""#SenderId"").val(), messageContent).catch(function (err) {
            console.log(err.toString());
        });
    }


    //connection.on(""RemovedFromGroup"", function (Group, User) {
    //    console.log(""Removed -> group="" + Group + "" / user="" ");
            WriteLiteral(@"+ User);
    //});
    //connection.on(""AddedToGroup"", function (Group, User) {
    //    console.log(""Added -> group="" + Group + "" / user="" + User);
    //});

    connection.on(""RecieveMessage"", function (Group, Sender, Message) {
        if ($(""#ChatId"").val() !== Group)
            return;

        var div = document.createElement(""div"");
        div.className = ""d-block"";

        var div2 = document.createElement(""div"");
        div2.className = ""background-light margin-right-25 div-align-left text-align-left border-radius-left"";
        if (Sender !== $(""#SenderId"").val())
            div2.className = ""background-dark margin-left-25 div-align-right text-align-right border-radius-right"";
        div2.className += "" w-75 d-inline-block margin-5 padding-20 text-color-white"";

        var p = document.createElement(""p"");
        p.className = ""small-text text-color-darkgray"";
        var today = new Date();
        var day = today.getDay();
        var daylist = [""Sunday"", ""Monday"", ");
            WriteLiteral(@"""Tuesday"", ""Wednesday "", ""Thursday"", ""Friday"", ""Saturday""];
        p.innerHTML = today.getDay() + ""/"" + today.getMonth() + ""/"" + today.getFullYear() + "" "" + today.getHours() + "":"" + today.getMinutes() + "" "" + daylist[day];

        var p2 = document.createElement(""p"");
        p2.innerHTML = Message;

        div2.appendChild(p);
        div2.appendChild(p2);

        div.appendChild(div2);
        var parent = document.getElementById(""messagesDiv"");
        parent.appendChild(div);
        parent.scrollTop = parent.scrollHeight;
    });


    //const connection = new signalR.HubConnectionBuilder()
    //    .withUrl(""/chatHub/"")
    //    .configureLogging(signalR.LogLevel.Information)
    //    .build();

    ////$(window).on(""load"", function () {
    ////    connection.invoke(""AddUserToGroup"", $(""#ChatId"").val()).catch(function (err) {
    ////        console.log(err.toString());
    ////    });
    ////});



    //document.getElementById(""sendMessageButton"").disabled = true;");
            WriteLiteral(@"

    //connection.on(""RemovedFromGroup"", function (Group, User) {
    //    console.log(""Removed -> group="" + Group + "" / user="" + User);
    //});
    //connection.on(""AddedToGroup"", function (Group, User) {
    //    console.log(""Added -> group="" + Group + "" / user="" + User);
    //});

    //connection.on(""RecieveMessage"", function (Group, Sender, Message) {
    //    if ($(""#ChatId"").val() !== Group)
    //        throw new Error(""error bacen"");

    //    var div = document.createElement(""div"");
    //    div.className = ""d-block"";

    //    var div2 = document.createElement(""div"");
    //    div2.className = ""background-light margin-right-25 div-align-left text-align-left border-radius-left"";
    //    if (Sender !== $(""#SenderId"").val())
    //        div2.className = ""background-dark margin-left-25 div-align-right text-align-right border-radius-right"";
    //    div2.className += "" w-75 d-inline-block margin-5 padding-20 text-color-white"";

    //    var p = document.createElem");
            WriteLiteral(@"ent(""p"");
    //    p.className = ""small-text text-color-darkgray"";
    //    var today = new Date();
    //    var day = today.getDay();
    //    var daylist = [""Sunday"", ""Monday"", ""Tuesday"", ""Wednesday "", ""Thursday"", ""Friday"", ""Saturday""];
    //    p.innerHTML = today.getDay() + ""/"" + today.getMonth() + ""/"" + today.getFullYear() + "" "" + today.getHours() + "":"" + today.getMinutes() + "" "" + daylist[day];

    //    var p2 = document.createElement(""p"");
    //    p2.innerHTML = Message;

    //    div2.appendChild(p);
    //    div2.appendChild(p2);

    //    div.appendChild(div2);
    //    var parent = document.getElementById(""messagesDiv"");
    //    parent.appendChild(div);
    //    parent.scrollTop = parent.scrollHeight;
    //});

    //connection.start().then(function () {
    //    document.getElementById(""sendMessageButton"").disabled = false;
    //    connection.invoke(""AddUserToGroup"", $(""#ChatId"").val()).catch(function (err) {
    //        console.log(err.toString());
   ");
            WriteLiteral(@" //    });
    //}).catch(function (err) {
    //    console.log(err.toString());
    //});

    //window.addEventListener(""beforeunload"", function () {
    //    alert(""on unload"");
    //    connection.hub.stop().done(function () {
    //        alert('stopped');
    //    });
    //});

    //function SendNewMessage() {
    //    var messageContent = $(""#messageInput"").val();
    //    $.post(""/Chat/SendNewMessage?ChatId="" + $(""#ChatId"").val() + ""&Message="" + messageContent + ""&User2Id="" + $(""#RecieverId"").val());
    //    connection.invoke(""SendMessageToGroup"", $(""#ChatId"").val(), $(""#SenderId"").val(), messageContent).catch(function (err) {
    //        console.log(err.toString());
    //    });
    //}


</script>");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<ChatListingMessages_VM> Html { get; private set; }
    }
}
#pragma warning restore 1591
