#pragma checksum "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "1b0c1cc2d88abe24cf7d831bf59b8534c4ba14b9"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Chat_OpenChatBox_Ajax), @"mvc.1.0.view", @"/Views/Chat/OpenChatBox_Ajax.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\_ViewImports.cshtml"
using WebApp;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\_ViewImports.cshtml"
using WebApp.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
using WebApp.ViewModels.Chat;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"1b0c1cc2d88abe24cf7d831bf59b8534c4ba14b9", @"/Views/Chat/OpenChatBox_Ajax.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"fc48f17eb9bac3476d8060730298bf398eb2fa5e", @"/Views/_ViewImports.cshtml")]
    public class Views_Chat_OpenChatBox_Ajax : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<ChatListingMessages_VM>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n<p class=\"header-text text-color-black\"><i class=\"fa fa-commenting\"></i> Message ");
#nullable restore
#line 4 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
                                                                            Write(Model.RecieverName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n<div class=\"flex-column padding-50 h-100 scroll-allow\" id=\"messagesDiv\">\r\n\r\n\r\n");
#nullable restore
#line 8 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
     foreach (var i in Model.MessagesList)
    {

#line default
#line hidden
#nullable disable
            WriteLiteral("        <div class=\"d-block\">\r\n            <div");
            BeginWriteAttribute("class", " class=\"", 346, "\"", 619, 6);
#nullable restore
#line 11 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
WriteAttributeValue("", 354, i.SenderId != Model.RecieverId ? "background-light margin-right-25 div-align-left text-align-left border-radius-left" : "background-dark margin-left-25 div-align-right text-align-right border-radius-right", 354, 208, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue(" ", 562, "w-75", 563, 5, true);
            WriteAttributeValue(" ", 567, "d-inline-block", 568, 15, true);
            WriteAttributeValue(" ", 582, "margin-5", 583, 9, true);
            WriteAttributeValue(" ", 591, "padding-20", 592, 11, true);
            WriteAttributeValue(" ", 602, "text-color-white", 603, 17, true);
            EndWriteAttribute();
            WriteLiteral(">\r\n                <p class=\"small-text text-color-darkgray\">");
#nullable restore
#line 12 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
                                                     Write(i.SendingDate.ToString("dd/MM/yyyy hh:mm dddd"));

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n                <p> ");
#nullable restore
#line 13 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
               Write(i.MessageContent);

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n            </div>\r\n        </div>\r\n");
#nullable restore
#line 16 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
    }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"

</div>

<div class=""d-block"">
    <input id=""messageInput"" placeholder=""Write your message.."" class=""w-75 h-100 padding-5"" /> <button id=""sendMessageButton"" class=""btn btn-secondary float-right w-25 h-100"" onclick=""javasctipt: SendNewMessage();"">Send <i class=""fa fa-level-up""></i></button>
</div>

<button onclick=""javascript: Test();"">Test</button>

<script>


    const conn = new signalR.HubConnectionBuilder()
        .withUrl(""/chatHub/"")
        //.configureLogging(signalR.LogLevel.Information)
        .build();

    $(window).on(""load"", function () {
        conn.invoke(""AddUserToGroup"", '");
#nullable restore
#line 36 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
                                  Write(Model.ChatId);

#line default
#line hidden
#nullable disable
            WriteLiteral(@"').catch(function (err) {
            console.log(err.toString());
        });
    });

    document.getElementById(""sendMessageButton"").disabled = true;

    conn.on(""RemovedFromGroup"", function (Group, User) {
        alert(""Removed -> group="" + Group + "" / user="" + User);
    });
    conn.on(""AddedToGroup"", function (Group, User) {
        alert(""Added -> group="" + Group + "" / user="" + User);
    });


    conn.on(""RecieveMessage"", function (Group, Sender, Message) {
        if ('");
#nullable restore
#line 52 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
        Write(Model.ChatId);

#line default
#line hidden
#nullable disable
            WriteLiteral(@"' != Group)
            return;

        var div = document.createElement(""div"");
        div.className = ""d-block"";

        var div2 = document.createElement(""div"");
        div2.className = ""background-light margin-right-25 div-align-left text-align-left border-radius-left"";
        if (Sender != '");
#nullable restore
#line 60 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
                  Write(Model.SenderId);

#line default
#line hidden
#nullable disable
            WriteLiteral(@"')
            div2.className = ""background-dark margin-left-25 div-align-right text-align-right border-radius-right"";
        div2.className += "" w-75 d-inline-block margin-5 padding-20 text-color-white"";

        var p = document.createElement(""p"");
        p.className = ""small-text text-color-darkgray"";
        var today = new Date();
        var day = today.getDay();
        var daylist = [""Sunday"", ""Monday"", ""Tuesday"", ""Wednesday "", ""Thursday"", ""Friday"", ""Saturday""];
        p.innerHTML = today.getDay() + ""/"" + today.getMonth() + ""/"" + today.getFullYear() + "" "" + today.getHours() + "":"" + today.getMinutes() + "" "" + daylist[day];

        var p2 = document.createElement(""p"");
        p2.innerHTML = Message;

        div2.appendChild(p);
        div2.appendChild(p2);

        div.appendChild(div2);
        var parent = document.getElementById(""messagesDiv"");
        parent.appendChild(div);
        parent.scrollTop = parent.scrollHeight;
    });

    conn.start().then(function () {
 ");
            WriteLiteral("       document.getElementById(\"sendMessageButton\").disabled = false;\r\n        conn.invoke(\"AddUserToGroup\", \'");
#nullable restore
#line 85 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
                                  Write(Model.ChatId);

#line default
#line hidden
#nullable disable
            WriteLiteral(@"').catch(function (err) {
            console.log(err.toString());
        });
    }).catch(function (err) {
        console.log(err.toString());
    });

    function SendNewMessage() {
        var messageContent = $(""#messageInput"").val();
        $.post(""/Chat/SendNewMessage?ChatId="" + '");
#nullable restore
#line 94 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
                                            Write(Model.ChatId);

#line default
#line hidden
#nullable disable
            WriteLiteral("\' + \"&Message=\" + messageContent + \"&User2Id=\" + \'");
#nullable restore
#line 94 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
                                                                                                           Write(Model.RecieverId);

#line default
#line hidden
#nullable disable
            WriteLiteral("\');\r\n        conn.invoke(\"SendMessageToGroup\", \'");
#nullable restore
#line 95 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
                                      Write(Model.ChatId);

#line default
#line hidden
#nullable disable
            WriteLiteral("\', \'");
#nullable restore
#line 95 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenChatBox_Ajax.cshtml"
                                                       Write(Model.SenderId);

#line default
#line hidden
#nullable disable
            WriteLiteral("\', messageContent).catch(function (err) {\r\n            console.log(err.toString());\r\n        });\r\n    }\r\n\r\n\r\n</script>");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<ChatListingMessages_VM> Html { get; private set; }
    }
}
#pragma warning restore 1591
