#pragma checksum "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "9d6eb7afa78428822aa3905ef50c18da421c62d1"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Chat_OpenGroupChatBox_Ajax), @"mvc.1.0.view", @"/Views/Chat/OpenGroupChatBox_Ajax.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\_ViewImports.cshtml"
using WebApp;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\_ViewImports.cshtml"
using WebApp.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
using WebApp.ViewModels.Chat;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"9d6eb7afa78428822aa3905ef50c18da421c62d1", @"/Views/Chat/OpenGroupChatBox_Ajax.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"fc48f17eb9bac3476d8060730298bf398eb2fa5e", @"/Views/_ViewImports.cshtml")]
    public class Views_Chat_OpenGroupChatBox_Ajax : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<GroupChatListingMessages_VM>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n<p class=\"header-text text-color-black\"><i class=\"fa fa-commenting\"></i> ");
#nullable restore
#line 4 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
                                                                    Write(Model.GroupName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n<div class=\"flex-column padding-50 h-100 scroll-allow\" id=\"messagesDiv\">\r\n\r\n");
#nullable restore
#line 7 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
     foreach (var i in Model.Messages)
    {

#line default
#line hidden
#nullable disable
            WriteLiteral("        <div class=\"d-block\">\r\n            <div");
            BeginWriteAttribute("class", " class=\"", 334, "\"", 603, 6);
#nullable restore
#line 10 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
WriteAttributeValue("", 342, i.SenderId != Model.UserId ? "background-light margin-right-25 div-align-left text-align-left border-radius-left" : "background-dark margin-left-25 div-align-right text-align-right border-radius-right", 342, 204, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue(" ", 546, "w-75", 547, 5, true);
            WriteAttributeValue(" ", 551, "d-inline-block", 552, 15, true);
            WriteAttributeValue(" ", 566, "margin-5", 567, 9, true);
            WriteAttributeValue(" ", 575, "padding-20", 576, 11, true);
            WriteAttributeValue(" ", 586, "text-color-white", 587, 17, true);
            EndWriteAttribute();
            WriteLiteral(">\r\n                <p class=\"small-text text-color-darkgray\">");
#nullable restore
#line 11 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
                                                     Write(i.SenderName);

#line default
#line hidden
#nullable disable
            WriteLiteral(" ");
#nullable restore
#line 11 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
                                                                   Write(i.SendingDate.ToString("dd/MM/yyyy hh:mm dddd"));

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n                <p> ");
#nullable restore
#line 12 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
               Write(i.MessageContent);

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n            </div>\r\n        </div>\r\n");
#nullable restore
#line 15 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
    }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"


</div>

<div class=""d-block"">
    <input placeholder=""Write your message.."" class=""w-75 h-100 padding-5"" id=""messageInput"" /> <button class=""btn btn-secondary float-right w-25 h-100"" onclick=""javascript: SendNewMessage();"" id=""sendMessageButton"">Send <i class=""fa fa-level-up""></i></button>
</div>

<script>
   const conn = new signalR.HubConnectionBuilder()
        .withUrl(""/chatHub/"")
        //.configureLogging(signalR.LogLevel.Information)
        .build();

        document.getElementById(""sendMessageButton"").disabled = true;

    conn.on(""RemovedFromGroup"", function (Group, User) {
        alert(""Removed -> group="" + Group + "" / user="" + User);
    });
    conn.on(""AddedToGroup"", function (Group, User) {
        alert(""Added -> group="" + Group + "" / user="" + User);
    });


    conn.on(""RecieveMessage"", function (Group, Sender, Message) {
        if (""Group_"" + '");
#nullable restore
#line 42 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
                   Write(Model.GroupChatId);

#line default
#line hidden
#nullable disable
            WriteLiteral(@"' != Group)
            return;

        var div = document.createElement(""div"");
        div.className = ""d-block"";

        var div2 = document.createElement(""div"");
        div2.className = ""background-light margin-right-25 div-align-left text-align-left border-radius-left"";
        if (Sender != '");
#nullable restore
#line 50 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
                  Write(Model.UserId);

#line default
#line hidden
#nullable disable
            WriteLiteral(@"')
            div2.className = ""background-dark margin-left-25 div-align-right text-align-right border-radius-right"";
        div2.className += "" w-75 d-inline-block margin-5 padding-20 text-color-white"";

        var p = document.createElement(""p"");
        p.className = ""small-text text-color-darkgray"";
        var today = new Date();
        var day = today.getDay();
        var daylist = [""Sunday"", ""Monday"", ""Tuesday"", ""Wednesday "", ""Thursday"", ""Friday"", ""Saturday""];
        p.innerHTML = today.getDay() + ""/"" + today.getMonth() + ""/"" + today.getFullYear() + "" "" + today.getHours() + "":"" + today.getMinutes() + "" "" + daylist[day];

        var p2 = document.createElement(""p"");
        p2.innerHTML = Message;

        div2.appendChild(p);
        div2.appendChild(p2);

        div.appendChild(div2);
        var parent = document.getElementById(""messagesDiv"");
        parent.appendChild(div);
        parent.scrollTop = parent.scrollHeight;
    });

    conn.start().then(function () {
 ");
            WriteLiteral("       document.getElementById(\"sendMessageButton\").disabled = false;\r\n        conn.invoke(\"AddUserToGroup\", \"Group_\" + \'");
#nullable restore
#line 75 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
                                             Write(Model.GroupChatId);

#line default
#line hidden
#nullable disable
            WriteLiteral(@"').catch(function (err) {
            console.log(err.toString());
        });
    }).catch(function (err) {
        console.log(err.toString());
    });

    function SendNewMessage() {
        var messageContent = $(""#messageInput"").val();
        // $.post(""/Chat/SendNewGroupMessage?GroupChatId="" + '");
#nullable restore
#line 84 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
                                                         Write(Model.GroupChatId);

#line default
#line hidden
#nullable disable
            WriteLiteral("\' + \"&Message=\" + messageContent);\r\n        conn.invoke(\"SendMessageToGroup\", \"Group_\" + \'");
#nullable restore
#line 85 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
                                                 Write(Model.GroupChatId);

#line default
#line hidden
#nullable disable
            WriteLiteral("\', \'");
#nullable restore
#line 85 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
                                                                       Write(Model.UserId);

#line default
#line hidden
#nullable disable
            WriteLiteral("\', messageContent).catch(function (err) {\r\n            console.log(err.toString());\r\n        });\r\n    }\r\n</script>");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<GroupChatListingMessages_VM> Html { get; private set; }
    }
}
#pragma warning restore 1591
