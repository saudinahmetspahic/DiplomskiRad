#pragma checksum "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "56d53d9449c7c94fedab2d74e5125c44f634aeb8"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Chat_OpenGroupChatBox_Ajax), @"mvc.1.0.view", @"/Views/Chat/OpenGroupChatBox_Ajax.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\_ViewImports.cshtml"
using WebApp;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\_ViewImports.cshtml"
using WebApp.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 1 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
using WebApp.ViewModels.Chat;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"56d53d9449c7c94fedab2d74e5125c44f634aeb8", @"/Views/Chat/OpenGroupChatBox_Ajax.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"fc48f17eb9bac3476d8060730298bf398eb2fa5e", @"/Views/_ViewImports.cshtml")]
    public class Views_Chat_OpenGroupChatBox_Ajax : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<GroupChatListingMessages_VM>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n\r\n<div class=\"d-flex justify-content-between margin-bottom-20\">\r\n    <input hidden");
            BeginWriteAttribute("value", " value=\"", 151, "\"", 177, 1);
#nullable restore
#line 6 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
WriteAttributeValue("", 159, Model.GroupChatId, 159, 18, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" id=\"GroupChatId\" />\r\n    <input hidden");
            BeginWriteAttribute("value", " value=\"", 217, "\"", 238, 1);
#nullable restore
#line 7 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
WriteAttributeValue("", 225, Model.UserId, 225, 13, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" id=\"UserId\" />\r\n    <p class=\"header-text text-color-black\"><i class=\"fa fa-commenting\"></i> ");
#nullable restore
#line 8 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
                                                                        Write(Model.GroupName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n    <div class=\"switch-to-column\">\r\n        <button class=\"btn-light border-0 padding-5\"");
            BeginWriteAttribute("onclick", " onclick=\"", 443, "\"", 517, 7);
            WriteAttributeValue("", 453, "javascript:", 453, 11, true);
            WriteAttributeValue(" ", 464, "LeaveChatGroup(\'", 465, 17, true);
#nullable restore
#line 10 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
WriteAttributeValue("", 481, Model.GroupName, 481, 16, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue("", 497, "\',", 497, 2, true);
            WriteAttributeValue(" ", 499, "\'", 500, 2, true);
#nullable restore
#line 10 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
WriteAttributeValue("", 501, Model.UserId, 501, 13, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue("", 514, "\');", 514, 3, true);
            EndWriteAttribute();
            WriteLiteral(">Leave group</button>\r\n        <button class=\"btn-info border-0 padding-5\"");
            BeginWriteAttribute("onclick", " onclick=\"", 592, "\"", 652, 4);
            WriteAttributeValue("", 602, "javascript:", 602, 11, true);
            WriteAttributeValue(" ", 613, "AddParticipants(\'", 614, 18, true);
#nullable restore
#line 11 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
WriteAttributeValue("", 631, Model.GroupChatId, 631, 18, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue("", 649, "\');", 649, 3, true);
            EndWriteAttribute();
            WriteLiteral(">Participants</button>\r\n    </div>\r\n</div>\r\n<div class=\"flex-column padding-50 h-100 scroll-allow max-height-500\" id=\"messagesDiv\">\r\n\r\n");
#nullable restore
#line 16 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
     foreach (var i in Model.Messages.OrderBy(o => o.SendingDate))
    {

#line default
#line hidden
#nullable disable
            WriteLiteral("        <div class=\"d-block\">\r\n            <div");
            BeginWriteAttribute("class", " class=\"", 910, "\"", 1179, 6);
#nullable restore
#line 19 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
WriteAttributeValue("", 918, i.SenderId == Model.UserId ? "background-light margin-right-25 div-align-left text-align-left border-radius-left" : "background-dark margin-left-25 div-align-right text-align-right border-radius-right", 918, 204, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue(" ", 1122, "w-75", 1123, 5, true);
            WriteAttributeValue(" ", 1127, "d-inline-block", 1128, 15, true);
            WriteAttributeValue(" ", 1142, "margin-5", 1143, 9, true);
            WriteAttributeValue(" ", 1151, "padding-20", 1152, 11, true);
            WriteAttributeValue(" ", 1162, "text-color-white", 1163, 17, true);
            EndWriteAttribute();
            WriteLiteral(">\r\n                <p class=\"small-text text-color-darkgray\">");
#nullable restore
#line 20 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
                                                     Write(i.SenderName);

#line default
#line hidden
#nullable disable
            WriteLiteral(" ");
#nullable restore
#line 20 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
                                                                   Write(i.SendingDate.ToString("dd/MM/yyyy hh:mm dddd"));

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n                <p> ");
#nullable restore
#line 21 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
               Write(i.MessageContent);

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n            </div>\r\n        </div>\r\n");
#nullable restore
#line 24 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
    }

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n\r\n\r\n</div>\r\n\r\n<div class=\"d-block\">\r\n    <input placeholder=\"Write your message..\" class=\"w-75 h-100 padding-5\" id=\"messageInput\" /> <button class=\"btn btn-secondary float-right w-25 h-100\"");
            BeginWriteAttribute("onclick", " onclick=\"", 1586, "\"", 1662, 7);
            WriteAttributeValue("", 1596, "javascript:", 1596, 11, true);
            WriteAttributeValue(" ", 1607, "SendNewMessage(\'", 1608, 17, true);
#nullable restore
#line 31 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
WriteAttributeValue("", 1624, Model.GroupChatId, 1624, 18, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue("", 1642, "\',", 1642, 2, true);
            WriteAttributeValue(" ", 1644, "\'", 1645, 2, true);
#nullable restore
#line 31 "C:\Users\saudi\source\repos\WebApp\WebApp\Views\Chat\OpenGroupChatBox_Ajax.cshtml"
WriteAttributeValue("", 1646, Model.UserId, 1646, 13, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue("", 1659, "\');", 1659, 3, true);
            EndWriteAttribute();
            WriteLiteral(@" id=""sendMessageButton"">Send <i class=""fa fa-level-up""></i></button>
</div>



<script>
    function LeaveChatGroup(GroupChaName, UserId) {
        $.post(""/Chat/RemoveGroupChatParticipant?GroupName="" + GroupChaName + ""&UserId="" + UserId, function (result, status) {
            if (status == ""success"") {
                var h3 = document.createElement(""h3"");
                h3.className = ""text-center d-block padding-20 text-uppercase"";
                h3.textContent = ""You left this group."";
                $(""#messagesDiv"").html(h3);
                document.getElementById(""messageInput"").disabled = true;
                document.getElementById(""sendMessageButton"").disabled = true;
            }
        });
    }

    function AddParticipants(GroupChatId) {

        var div = document.createElement(""div"");

        var h5 = document.createElement(""h5"");
        h5.textContent = ""Add new chat participants"";
        h5.classList = ""text-align-left"";

        var input = document.cre");
            WriteLiteral(@"ateElement(""input"");
        input.placeholder = ""Search.."";
        input.classList = ""w-100 padding-5"";
        input.addEventListener(""input"", function () {
            $.get(""/Chat/AddGroupChatParticipants?GroupChatId="" + GroupChatId + ""&Value="" + input.value, function (result, status) {
                ajaxdiv.innerHTML = result;
            });
        });

        var ajaxdiv = document.createElement(""div"");
        ajaxdiv.className = ""w-100 padding-5 max-height-300 overflow-auto"";

        div.appendChild(h5);
        div.appendChild(input);
        div.appendChild(ajaxdiv);

        MakeCustomModal(""Participants"", div, false, function () { });
    }

    function AddNewGroupParticipant(e, GroupChatId, ParticipantId) {
        $.post(""/Chat/AddNewGroupChatParticipant?GroupChatId="" + GroupChatId + ""&UserId="" + ParticipantId, function (result, status) {
            if (status == ""success"") {
                Message(""User successfully added to group chat."");
                e.remo");
            WriteLiteral(@"ve();
            }
        });
    }


    //const conn = new signalR.HubConnectionBuilder()
    //    .withUrl(""/chatHub/"")
    //    .configureLogging(signalR.LogLevel.Information)
    //    .build();

    //document.getElementById(""sendMessageButton"").disabled = true;

    //conn.on(""RemovedFromGroup"", function (Group, User) {
    //    alert(""Removed -> group="" + Group + "" / user="" + User);
    //});
    //conn.on(""AddedToGroup"", function (Group, User) {
    //    alert(""Added -> group="" + Group + "" / user="" + User);   //});


    connection.on(""RecieveMessage"", function (Group, Sender, Message) {
        var GroupID = $(""#GroupChatId"").val();
        if (""Group_"" + GroupID != Group) {
            return;
        }

        var div = document.createElement(""div"");
        div.className = ""d-block"";

        var div2 =ModeGroupChatIdldocument.createElement(""div"");
        div2.className = ""background-light margin-right-25 div-align-left text-align-left border-radius-left"";
 ");
            WriteLiteral(@"       var UserID = $(""#UserId"").val();
        if (Sender != UserID)
            div2.className = ""background-dark margin-left-25 div-align-right text-align-right border-radius-right"";
        div2.className += "" w-75 d-inline-block margin-5 padding-20 text-color-white"";

        var p = document.createElement(""p"");
        p.className = ""small-text text-color-darkgray"";
        var today = new Date();
        var day = today.getDay();
        var daylist = [""Sunday"", ""Monday"", ""Tuesday"", ""Wednesday "", ""Thursday"", ""Friday"", ""Saturday""];
        p.innerHTML = today.getDay() + ""/"" + today.getMonth() + ""/"" + today.getFullYear() + "" "" + today.getHours().toFixed(2) + "":"" + today.getMinutes().toFixed(2) + "" "" + daylist[day];

        var p2 = document.createElement(""p"");
        p2.innerHTML = Message;

        div2.appendChild(p);
        div2.appendChild(p2);

        div.appendChild(div2);
        var parent = document.getElementById(""messagesDiv"");
        parent.appendChild(div);
        ");
            WriteLiteral(@"parent.scrollTop = parent.scrollHeight;
    });

    //conn.start().then(function () {
    //    var GroupID = $(""#GroupChatID"").val();
    //    //document.getElementById(""sendMessageButton"").disabled = false;
        
    //}).catch(function (err) {
    //    console.log(err.toString());
    //});

    function SendNewMessage(ChatId, UserId) {
        connection.invoke(""AddUserToGroup"", ""Group_"" + ChatId).catch(function (err) {
            console.log(err.toString());
        });

        var messageContent = $(""#messageInput"").val();
        $.post(""/Chat/SendNewGroupMessage?GroupChatId="" + ChatId + ""&Message="" + messageContent);
        connection.invoke(""SendMessageToGroup"", ""Group_"" + ChatId, UserId, messageContent).catch(function (err) {
            console.log(err.toString());
        });
    }
</script>");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<GroupChatListingMessages_VM> Html { get; private set; }
    }
}
#pragma warning restore 1591
